<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Portrait Stock Ideas (Medium Shot 17:9)</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Sarabun:wght@300;400;500;700&display=swap" rel="stylesheet">
    <script>
        tailwind.config = {
            darkMode: 'class',
        }
    </script>
    <style>
        body { font-family: 'Sarabun', sans-serif; background-color: #f3f4f6; transition: background 0.3s; }
        .dark body { background-color: #111827; }
        .dark .bg-white { background-color: #1f2937; }
        .dark .text-gray-800 { color: #f3f4f6; }
        .dark .text-gray-500 { color: #9ca3af; }
        .dark .border-gray-100 { border-color: #374151; }
        .fade-in { animation: fadeIn 0.4s ease-out; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        /* Toast z-index must be higher than modal */
        .toast { visibility: hidden; min-width: 260px; background-color: #1f2937; color: #fff; text-align: center; border-radius: 50px; padding: 12px 24px; position: fixed; z-index: 100; left: 50%; bottom: 30px; transform: translateX(-50%); font-size: 14px; font-weight: 500; opacity: 0; transition: all 0.3s; box-shadow: 0 4px 20px rgba(0,0,0,0.3); }
        .toast.show { visibility: visible; opacity: 1; bottom: 60px; }
        .dark .toast { background-color: #f3f4f6; color: #111827; }
        
        /* Modal Styles */
        .modal { opacity: 0; visibility: hidden; transition: all 0.3s ease; z-index: 50; }
        .modal.active { opacity: 1; visibility: visible; }
        .modal-content { transform: scale(0.95); transition: all 0.3s ease; }
        .modal.active .modal-content { transform: scale(1); }

        /* Custom Scrollbar */
        ::-webkit-scrollbar { width: 8px; }
        ::-webkit-scrollbar-track { background: transparent; }
        ::-webkit-scrollbar-thumb { background: #cbd5e1; border-radius: 4px; }
        ::-webkit-scrollbar-thumb:hover { background: #94a3b8; }
        .dark ::-webkit-scrollbar-thumb { background: #4b5563; }
    </style>
</head>
<body class="min-h-screen flex flex-col items-center py-6 px-4 dark:bg-gray-900">

    <!-- Header -->
    <div class="w-full max-w-5xl flex flex-col md:flex-row items-center justify-between gap-4 mb-6">
        <div class="text-center md:text-left">
            <h1 class="text-2xl md:text-3xl font-bold text-gray-800 dark:text-white flex items-center gap-2 flex-wrap justify-center md:justify-start">
                Stock Prompt Generator
                <span class="text-xs font-normal text-white bg-gradient-to-r from-pink-500 to-purple-500 px-3 py-1 rounded-full shadow-sm">V.13 Portrait Medium Shot</span>
            </h1>
            <p class="text-xs text-gray-500 dark:text-gray-400 mt-1">‡∏†‡∏≤‡∏û‡∏ñ‡πà‡∏≤‡∏¢‡∏ô‡∏≤‡∏á‡πÅ‡∏ö‡∏ö‡∏Ñ‡∏£‡∏∂‡πà‡∏á‡∏ï‡∏±‡∏ß (Medium Shot) ‡∏â‡∏≤‡∏Å‡∏´‡∏•‡∏±‡∏á‡∏ï‡∏≤‡∏°‡∏™‡∏ñ‡∏≤‡∏ô‡∏ó‡∏µ‡πà‡∏™‡∏∏‡πà‡∏° ‡πÄ‡∏ô‡πâ‡∏ô‡πÉ‡∏ö‡∏´‡∏ô‡πâ‡∏≤‡∏Ñ‡∏°‡∏ä‡∏±‡∏î ‡∏â‡∏≤‡∏Å‡∏´‡∏•‡∏±‡∏á‡πÄ‡∏ö‡∏•‡∏≠ (17:9)</p>
        </div>

        <div class="flex flex-wrap gap-3 items-center justify-center">
            <button onclick="openCustomDataModal()" class="px-4 py-2 bg-yellow-100 hover:bg-yellow-200 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-200 rounded-full text-sm font-bold flex items-center gap-2 transition-colors border border-yellow-200 dark:border-yellow-800">
                üìù Custom Data
            </button>
            <button onclick="toggleDark()" class="px-4 py-2 bg-gray-200 dark:bg-gray-700 dark:text-white rounded-full text-sm hover:bg-gray-300 transition-colors">üåô Dark Mode</button>
            <button onclick="generateIdeas()" class="bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 px-8 rounded-full shadow-lg flex items-center gap-2 active:scale-95 transition-all">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15" />
                </svg>
                ‡∏™‡∏∏‡πà‡∏°‡πÑ‡∏≠‡πÄ‡∏î‡∏µ‡∏¢ (3 ‡∏ä‡πà‡∏≠‡∏á)
            </button>
        </div>
    </div>

    <!-- Filters -->
    <div class="w-full max-w-5xl mb-5 flex flex-wrap gap-2 justify-center" id="filter-container">
        <button onclick="filterCategory('all')" class="filter-btn active px-4 py-1.5 bg-blue-600 text-white rounded-full text-xs md:text-sm transition-colors">‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</button>
        <button onclick="filterCategory('mountain')" class="filter-btn px-4 py-1.5 bg-gray-200 dark:bg-gray-700 dark:text-gray-300 rounded-full text-xs md:text-sm hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors">Mountains</button>
        <button onclick="filterCategory('beach')" class="filter-btn px-4 py-1.5 bg-gray-200 dark:bg-gray-700 dark:text-gray-300 rounded-full text-xs md:text-sm hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors">Beaches & Coast</button>
        <button onclick="filterCategory('forest')" class="filter-btn px-4 py-1.5 bg-gray-200 dark:bg-gray-700 dark:text-gray-300 rounded-full text-xs md:text-sm hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors">Forests & Nature</button>
        <button onclick="resetToDefault()" class="hidden px-4 py-1.5 bg-red-100 text-red-600 rounded-full text-xs md:text-sm hover:bg-red-200 transition-colors" id="reset-btn">üîÑ ‡∏Å‡∏•‡∏±‡∏ö‡πÑ‡∏õ‡πÉ‡∏ä‡πâ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏î‡∏¥‡∏°</button>
    </div>

    <!-- Results Grid -->
    <div id="results-container" class="w-full max-w-6xl grid grid-cols-1 md:grid-cols-3 gap-6">
        <div class="col-span-full text-center py-16 bg-white dark:bg-gray-800 rounded-xl border border-dashed border-gray-300 dark:border-gray-600">
            <p class="text-gray-400">‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÇ‡∏´‡∏•‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•...</p>
        </div>
    </div>

    <!-- Prompt Modal (Hidden - Logic Only) -->
    <div id="promptModal" class="modal fixed inset-0 z-50 flex items-center justify-center bg-black/60 p-4">
        <div class="modal-content bg-white dark:bg-gray-800 w-full max-w-2xl rounded-2xl shadow-2xl flex flex-col max-h-[90vh] overflow-hidden hidden">
            <textarea id="modal-positive"></textarea>
        </div>
    </div>

    <!-- Custom Data Modal -->
    <div id="customDataModal" class="modal fixed inset-0 z-50 flex items-center justify-center bg-black/60 p-4">
        <div class="modal-content bg-white dark:bg-gray-800 w-full max-w-2xl rounded-2xl shadow-2xl flex flex-col h-[80vh] overflow-hidden">
            <div class="p-4 border-b border-gray-200 dark:border-gray-700 flex justify-between items-center bg-yellow-50 dark:bg-gray-800">
                <h2 class="text-lg font-bold text-gray-800 dark:text-white flex items-center gap-2">
                    <span>üìù</span> ‡πÉ‡∏™‡πà‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡∏ñ‡∏≤‡∏ô‡∏ó‡∏µ‡πà/‡∏ß‡∏¥‡∏ß (Custom Data)
                </h2>
                <button onclick="closeModal('customDataModal')" class="text-gray-400 hover:text-red-500 transition-colors p-1 rounded-full hover:bg-gray-100 dark:hover:bg-gray-700">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" /></svg>
                </button>
            </div>
            <div class="p-6 flex-grow flex flex-col space-y-4 overflow-hidden">
                <p class="text-sm text-gray-600 dark:text-gray-400">‡∏ß‡∏≤‡∏á‡∏£‡∏≤‡∏¢‡∏ä‡∏∑‡πà‡∏≠‡∏™‡∏ñ‡∏≤‡∏ô‡∏ó‡∏µ‡πà (1 ‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î = 1 ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£) <br><span class="text-red-500 text-xs">*‡∏Ñ‡∏ß‡∏£‡πÉ‡∏™‡πà Keywords ‡∏†‡∏≤‡∏©‡∏≤‡∏≠‡∏±‡∏á‡∏Å‡∏§‡∏©‡∏´‡∏•‡∏±‡∏á‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏´‡∏°‡∏≤‡∏¢ |</span></p>
                <div class="bg-gray-50 dark:bg-gray-900 p-3 rounded-lg border border-gray-200 dark:border-gray-700 text-xs text-gray-500 font-mono">
                    ‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á:<br>
                    ‡∏†‡∏π‡πÄ‡∏Ç‡∏≤‡πÑ‡∏ü‡∏ü‡∏π‡∏à‡∏¥ | Mount Fuji Japan, snow cap, cherry blossom<br>
                    ‡∏≠‡πà‡∏≤‡∏ß‡∏°‡∏≤‡∏´‡∏¢‡∏≤ | Maya Bay Thailand, limestone texture, turquoise water<br>
                    ‡∏õ‡πà‡∏≤‡πÑ‡∏ú‡πà | Arashiyama Bamboo Grove, bamboo patterns, green details
                </div>
                <textarea id="custom-input" class="w-full flex-grow p-4 bg-white dark:bg-gray-900 border border-gray-300 dark:border-gray-600 rounded-xl text-sm focus:ring-2 focus:ring-yellow-500 focus:outline-none resize-none font-mono" placeholder="‡∏ß‡∏≤‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏µ‡πà‡∏ô‡∏µ‡πà..."></textarea>
            </div>
            <div class="p-4 border-t border-gray-200 dark:border-gray-700 flex justify-end gap-3">
                <button onclick="closeModal('customDataModal')" class="px-5 py-2 text-gray-500 hover:text-gray-700 font-medium">‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å</button>
                <button onclick="loadCustomData()" class="px-6 py-2 bg-yellow-500 hover:bg-yellow-600 text-white font-bold rounded-lg shadow-md transition-transform active:scale-95">
                    üöÄ ‡πÉ‡∏ä‡πâ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ô‡∏µ‡πâ‡∏™‡∏∏‡πà‡∏°‡πÄ‡∏•‡∏¢
                </button>
            </div>
        </div>
    </div>

    <!-- Toast -->
    <div id="toast" class="toast">
        <span class="flex items-center justify-center gap-2">‚úÖ ‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢!</span>
    </div>

    <script>
        // Default Database
        const defaultDatabase = [
            { 
                t: "Mount Fuji", loc: "Japan", 
                d: "‡∏ô‡∏≤‡∏á‡πÅ‡∏ö‡∏ö‡∏™‡∏≤‡∏ß‡∏ç‡∏µ‡πà‡∏õ‡∏∏‡πà‡∏ô‡∏´‡∏ô‡πâ‡∏≤‡∏†‡∏π‡πÄ‡∏Ç‡∏≤‡πÑ‡∏ü‡∏ü‡∏π‡∏à‡∏¥", 
                k: "Mount Fuji peak, snow capped mountain, Lake Kawaguchi, cherry blossoms, serene atmosphere, japan landmark, clear blue sky", 
                cat: "mountain" 
            },
            { 
                t: "Dolomites", loc: "Italy", 
                d: "‡∏ô‡∏≤‡∏á‡πÅ‡∏ö‡∏ö‡∏™‡∏≤‡∏ß‡∏≠‡∏¥‡∏ï‡∏≤‡∏•‡∏µ‡∏ö‡∏ô‡πÄ‡∏ó‡∏∑‡∏≠‡∏Å‡πÄ‡∏Ç‡∏≤‡πÇ‡∏î‡πÇ‡∏•‡πÑ‡∏°‡∏ó‡πå", 
                k: "Dolomites mountains, Tre Cime di Lavaredo, jagged peaks, alpine meadow, green valleys, limestone rocks, italian alps, dramatic scenery", 
                cat: "mountain" 
            },
            { 
                t: "Maya Bay", loc: "Thailand", 
                d: "‡∏ô‡∏≤‡∏á‡πÅ‡∏ö‡∏ö‡∏™‡∏≤‡∏ß‡πÑ‡∏ó‡∏¢‡∏ó‡∏µ‡πà‡∏≠‡πà‡∏≤‡∏ß‡∏°‡∏≤‡∏´‡∏¢‡∏≤", 
                k: "Maya Bay beach, turquoise water, limestone cliffs, white sand, tropical lagoon, andaman sea, crystal clear ocean, paradise island", 
                cat: "beach" 
            },
            { 
                t: "Lofoten Islands", loc: "Norway", 
                d: "‡∏ô‡∏≤‡∏á‡πÅ‡∏ö‡∏ö‡∏™‡∏≤‡∏ß‡∏ô‡∏≠‡∏£‡πå‡πÄ‡∏ß‡∏¢‡πå‡πÉ‡∏ô‡∏´‡∏°‡∏π‡πà‡∏ö‡πâ‡∏≤‡∏ô‡∏ä‡∏≤‡∏ß‡∏õ‡∏£‡∏∞‡∏°‡∏á", 
                k: "Lofoten islands landscape, red fishing cabins, dramatic mountains, arctic fjord, reflection in water, norway nature, winter scenery, rorbuer village", 
                cat: "beach" 
            },
            { 
                t: "Arashiyama Bamboo", loc: "Japan", 
                d: "‡∏ô‡∏≤‡∏á‡πÅ‡∏ö‡∏ö‡∏™‡∏≤‡∏ß‡∏ç‡∏µ‡πà‡∏õ‡∏∏‡πà‡∏ô‡πÉ‡∏ô‡∏õ‡πà‡∏≤‡πÑ‡∏ú‡πà", 
                k: "Arashiyama Bamboo Grove, towering bamboo stalks, green forest path, sunlight filtering through, zen atmosphere, nature walkway, kyoto landmark", 
                cat: "forest" 
            },
            { 
                t: "Moraine Lake", loc: "Canada", 
                d: "‡∏ô‡∏≤‡∏á‡πÅ‡∏ö‡∏ö‡∏™‡∏≤‡∏ß‡πÅ‡∏Ñ‡∏ô‡∏≤‡∏î‡∏≤‡∏ó‡∏µ‡πà‡∏ó‡∏∞‡πÄ‡∏•‡∏™‡∏≤‡∏ö‡∏™‡∏µ‡∏°‡∏£‡∏Å‡∏ï", 
                k: "Moraine Lake, turquoise water, glacial lake, valley of the ten peaks, canadian rockies, pine forest, alpine landscape, banff national park", 
                cat: "mountain" 
            },
            { 
                t: "Santorini", loc: "Greece", 
                d: "‡∏ô‡∏≤‡∏á‡πÅ‡∏ö‡∏ö‡∏™‡∏≤‡∏ß‡∏Å‡∏£‡∏µ‡∏Å‡∏ö‡∏ô‡πÄ‡∏Å‡∏≤‡∏∞‡∏ã‡∏≤‡∏ô‡πÇ‡∏ï‡∏£‡∏¥‡∏ô‡∏µ", 
                k: "Santorini architecture, white houses blue domes, caldera cliff view, aegean sea background, oia village, greek island scenery, mediterranean landscape", 
                cat: "beach" 
            },
            { 
                t: "Grand Canyon", loc: "USA", 
                d: "‡∏ô‡∏≤‡∏á‡πÅ‡∏ö‡∏ö‡∏™‡∏≤‡∏ß‡∏≠‡πÄ‡∏°‡∏£‡∏¥‡∏Å‡∏±‡∏ô‡∏ó‡∏µ‡πà‡πÅ‡∏Å‡∏£‡∏ô‡∏î‡πå‡πÅ‡∏Ñ‡∏ô‡∏¢‡∏≠‡∏ô", 
                k: "Grand Canyon landscape, red rock formations, deep gorge, colorado river view, vast desert scenery, geological layers, erosion patterns, arizona landmark", 
                cat: "mountain" 
            },
            { 
                t: "Plitvice Lakes", loc: "Croatia", 
                d: "‡∏ô‡∏≤‡∏á‡πÅ‡∏ö‡∏ö‡∏™‡∏≤‡∏ß‡πÇ‡∏Ñ‡∏£‡πÄ‡∏≠‡πÄ‡∏ä‡∏µ‡∏¢‡∏ó‡∏µ‡πà‡∏ô‡πâ‡∏≥‡∏ï‡∏Å‡∏û‡∏•‡∏¥‡∏ï‡∏ß‡∏¥‡πÄ‡∏ã‡πà", 
                k: "Plitvice Lakes waterfalls, cascading water, turquoise lakes, lush green forest, wooden boardwalk, croatia nature, national park scenery", 
                cat: "forest" 
            },
            { 
                t: "Cinque Terre", loc: "Italy", 
                d: "‡∏ô‡∏≤‡∏á‡πÅ‡∏ö‡∏ö‡∏™‡∏≤‡∏ß‡∏≠‡∏¥‡∏ï‡∏≤‡∏•‡∏µ‡∏ó‡∏µ‡πà‡∏´‡∏°‡∏π‡πà‡∏ö‡πâ‡∏≤‡∏ô‡∏£‡∏¥‡∏°‡∏ó‡∏∞‡πÄ‡∏•", 
                k: "Cinque Terre coast, colorful village houses, cliffside buildings, ligurian sea view, italian riviera, rugged coastline, manarola scenic view", 
                cat: "beach" 
            },
            { 
                t: "Zhangjiajie", loc: "China", 
                d: "‡∏ô‡∏≤‡∏á‡πÅ‡∏ö‡∏ö‡∏™‡∏≤‡∏ß‡∏à‡∏µ‡∏ô‡∏ó‡πà‡∏≤‡∏°‡∏Å‡∏•‡∏≤‡∏á‡πÄ‡∏™‡∏≤‡∏´‡∏¥‡∏ô‡∏≠‡∏ß‡∏ï‡∏≤‡∏£", 
                k: "Zhangjiajie stone pillars, quartzite sandstone peaks, floating mountains, misty forest, avatar landscape, hunan china nature, vertical rock formations", 
                cat: "mountain" 
            },
            { 
                t: "Milford Sound", loc: "New Zealand", 
                d: "‡∏ô‡∏≤‡∏á‡πÅ‡∏ö‡∏ö‡∏™‡∏≤‡∏ß‡∏ô‡∏¥‡∏ß‡∏ã‡∏µ‡πÅ‡∏•‡∏ô‡∏î‡πå‡∏ó‡∏µ‡πà‡∏ü‡∏¢‡∏≠‡∏£‡πå‡∏î", 
                k: "Milford Sound fjord, mitre peak, waterfalls cascading, steep cliffs, moody atmosphere, new zealand landscape, deep water reflection, rain forest", 
                cat: "beach" 
            }
        ];

        // Active Database
        let fullDatabase = [...defaultDatabase];
        let isCustomMode = false;
        let lastDisplayedTitles = [];

        // Magic Words for Professional Portrait
        const MAGIC_QUALITY = "professional portrait photography, highly detailed, natural lighting, beautiful bokeh, shallow depth of field, 8k uhd, raw photo, rule of thirds composition";

        let currentIdeas = [];
        let currentCategory = 'all'; 

        function shuffleArray(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
            return array;
        }

        function generateIdeas() {
            const container = document.getElementById('results-container');
            container.innerHTML = '';
            
            let filteredPool = fullDatabase;
            if (!isCustomMode) {
                filteredPool = fullDatabase.filter(item => currentCategory === 'all' || item.cat === currentCategory);
            }

            let availablePool = filteredPool.filter(item => !lastDisplayedTitles.includes(item.t));
            
            if (availablePool.length < 3) {
                availablePool = filteredPool;
                lastDisplayedTitles = [];
            }
            
            let pool = [...availablePool];
            shuffleArray(pool);
            currentIdeas = pool.slice(0, 3); // Show 3 items

            lastDisplayedTitles = currentIdeas.map(item => item.t);

            if (currentIdeas.length === 0) {
                 container.innerHTML = `<div class="col-span-full text-center py-10 text-gray-500">‡πÑ‡∏°‡πà‡∏û‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•...</div>`;
                 return;
            }

            currentIdeas.forEach((item, i) => {
                const card = document.createElement('div');
                card.className = `bg-white dark:bg-gray-800 p-5 rounded-xl shadow-md border border-gray-200 dark:border-gray-700 flex flex-col h-full hover:border-pink-400 dark:hover:border-pink-500 transition-all fade-in relative group`;
                card.style.animationDelay = `${i * 0.05}s`;
                
                card.innerHTML = `
                    <div class="flex-grow flex flex-col">
                        <div class="flex justify-between items-start mb-2 h-8"> 
                            <h3 class="font-bold text-gray-800 dark:text-gray-100 text-base md:text-lg line-clamp-1" title="${item.t}">${item.t}</h3>
                            ${item.loc ? `<span class="text-[10px] bg-gray-100 dark:bg-gray-700 px-2 py-0.5 rounded text-gray-500 whitespace-nowrap ml-2">${item.loc}</span>` : ''}
                        </div>
                        <p class="text-xs text-gray-400 mb-3 h-8 overflow-hidden leading-4 line-clamp-2">${item.d}</p>
                        <div class="bg-gray-50 dark:bg-gray-900/50 p-3 rounded border border-gray-100 dark:border-gray-700 mb-4 flex-grow-0 h-16 overflow-hidden">
                            <p class="text-[10px] text-gray-400 uppercase font-bold mb-1">Location Keywords:</p>
                            <p class="text-xs text-gray-600 dark:text-gray-300 font-mono leading-relaxed line-clamp-2">${item.k}</p>
                        </div>
                    </div>
                    
                    <div class="flex flex-col gap-2 mt-auto pt-2 border-t border-gray-100 dark:border-gray-700">
                        <button onclick="openPromptModal(${i})" class="w-full bg-gradient-to-r from-pink-500 to-purple-600 hover:from-pink-600 hover:to-purple-700 text-white font-bold py-3 rounded-lg text-sm shadow-md hover:shadow-lg transition-all flex items-center justify-center gap-2">
                            <span>üì∏</span> ‡∏™‡∏£‡πâ‡∏≤‡∏á Prompt (Portrait)
                        </button>
                        <div class="flex gap-2">
                            <button onclick="copyText('${item.k.replace(/'/g, "\\'")}', this)" class="flex-1 bg-blue-50 hover:bg-blue-100 dark:bg-blue-900/20 dark:hover:bg-blue-900/40 text-blue-700 dark:text-blue-300 py-2 rounded-lg text-xs font-medium border border-blue-100 dark:border-blue-800 transition-colors">Copy Keys</button>
                        </div>
                    </div>
                `;
                container.appendChild(card);
            });
        }

        // --- Prompt Logic (Portrait Medium Shot + AR 17:9) ---
        function openPromptModal(index) {
            const item = currentIdeas[index];
            
            // Portrait Structure:
            // Subject: Medium shot of a beautiful 20-year-old female idol, [Nationality based on loc], fair skin, charming, well-proportioned body
            // Vibe: Interesting outfit matching the location, engaging perspective
            // Focus: Sharp focus on face, blurred background of [Location Keywords]
            
            let nationality = "asian"; // Default
            if (item.loc) {
                const locLower = item.loc.toLowerCase();
                if (locLower.includes("japan")) nationality = "japanese";
                else if (locLower.includes("italy")) nationality = "italian";
                else if (locLower.includes("thailand")) nationality = "thai";
                else if (locLower.includes("norway")) nationality = "norwegian";
                else if (locLower.includes("canada")) nationality = "canadian";
                else if (locLower.includes("greece")) nationality = "greek";
                else if (locLower.includes("usa")) nationality = "american";
                else if (locLower.includes("croatia")) nationality = "croatian";
                else if (locLower.includes("china")) nationality = "chinese";
                else if (locLower.includes("new zealand")) nationality = "new zealander";
            }

            let subject = `A professional medium shot portrait of a charming 20-year-old ${nationality} female idol, fair and flawless skin, well-proportioned body, extremely attractive,`;
            let outfitAndVibe = `wearing an interesting outfit that perfectly matches the ${item.t} atmosphere, captured from an engaging perspective,`;
            let details = `sharp focus on her beautiful, clear face and charming expression, detailed skin texture, with a softly blurred background of ${item.k},`;
            
            const fullPrompt = `${subject} ${outfitAndVibe} ${details} ${MAGIC_QUALITY} --ar 17:9`;
            
            copyToClipboardRaw(fullPrompt, "Prompt");
        }

        // --- Custom Data & Utils ---
        function openCustomDataModal() {
            document.getElementById('customDataModal').classList.add('active');
            document.getElementById('custom-input').focus();
        }

        function closeModal(modalId) {
            document.getElementById(modalId).classList.remove('active');
        }

        function loadCustomData() {
            const rawText = document.getElementById('custom-input').value;
            if (!rawText.trim()) {
                showToast("‚ö†Ô∏è ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÉ‡∏™‡πà‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Å‡πà‡∏≠‡∏ô‡∏Ñ‡∏£‡∏±‡∏ö");
                return;
            }
            const lines = rawText.split('\n');
            const newDatabase = [];
            lines.forEach(line => {
                if (line.trim()) {
                    const parts = line.split('|');
                    const title = parts[0].trim();
                    const keywords = parts[1] ? parts[1].trim() : title;
                    newDatabase.push({ t: title, loc: "Custom", d: "‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏à‡∏≤‡∏Å‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ", k: keywords, cat: "custom" });
                }
            });
            if (newDatabase.length > 0) {
                fullDatabase = newDatabase;
                isCustomMode = true;
                currentCategory = 'all';
                lastDisplayedTitles = []; 
                document.getElementById('reset-btn').classList.remove('hidden');
                document.querySelectorAll('.filter-btn').forEach(btn => btn.classList.add('hidden'));
                closeModal('customDataModal');
                generateIdeas();
                showToast(`‚úÖ ‡πÇ‡∏´‡∏•‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• ${newDatabase.length} ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡πÅ‡∏•‡πâ‡∏ß!`);
            } else {
                showToast("‚ö†Ô∏è ‡πÑ‡∏°‡πà‡∏û‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏µ‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á");
            }
        }

        function resetToDefault() {
            fullDatabase = [...defaultDatabase];
            isCustomMode = false;
            lastDisplayedTitles = [];
            document.getElementById('reset-btn').classList.add('hidden');
            document.querySelectorAll('.filter-btn').forEach(btn => btn.classList.remove('hidden'));
            generateIdeas();
            showToast("üîÑ ‡∏Å‡∏•‡∏±‡∏ö‡∏™‡∏π‡πà‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô");
        }

        function copyText(text, btn) {
            copyToClipboardRaw(text, "Location Keywords", btn);
        }

        function copyToClipboardRaw(text, label, btnElement = null) {
            const textArea = document.createElement("textarea");
            textArea.value = text;
            textArea.style.position = "fixed";
            textArea.style.left = "0";
            textArea.style.top = "0";
            textArea.style.opacity = "0";
            document.body.appendChild(textArea);
            textArea.focus();
            textArea.select();
            try {
                const successful = document.execCommand('copy');
                if (successful) {
                    showToast(`‚úÖ ‡∏Ñ‡∏±‡∏î‡∏•‡∏≠‡∏Å ${label} ‡πÅ‡∏•‡πâ‡∏ß!`);
                    if(btnElement) {
                        const originalText = btnElement.textContent;
                        btnElement.textContent = '‚úì Copied!';
                        setTimeout(() => { btnElement.textContent = originalText; }, 1000);
                    }
                } else {
                    window.prompt("‡∏Å‡∏î Ctrl+C ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏Ñ‡∏±‡∏î‡∏•‡∏≠‡∏Å:", text);
                }
            } catch (err) {
                window.prompt("‡∏Å‡∏î Ctrl+C ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏Ñ‡∏±‡∏î‡∏•‡∏≠‡∏Å:", text);
            }
            document.body.removeChild(textArea);
        }

        function showToast(msg) {
            const toast = document.getElementById('toast');
            toast.innerHTML = `<span class="flex items-center justify-center gap-2">${msg}</span>`;
            toast.className = `toast show`;
            setTimeout(() => toast.className = toast.className.replace(' show', ''), 2500);
        }

        function toggleDark() {
            document.documentElement.classList.toggle('dark');
            document.body.classList.toggle('dark');
            localStorage.setItem('darkMode', document.documentElement.classList.contains('dark'));
        }

        function filterCategory(cat) {
            if (isCustomMode) return;
            document.querySelectorAll('.filter-btn').forEach(b => {
                b.classList.remove('active', 'bg-blue-600', 'text-white');
                b.classList.add('bg-gray-200', 'dark:bg-gray-700', 'dark:text-gray-300');
            });
            event.target.classList.remove('bg-gray-200', 'dark:bg-gray-700', 'dark:text-gray-300');
            event.target.classList.add('active', 'bg-blue-600', 'text-white');
            currentCategory = cat;
            generateIdeas();
        }

        if (localStorage.getItem('darkMode') === 'true') {
            document.documentElement.classList.add('dark');
            document.body.classList.add('dark');
        }

        window.onclick = function(event) {
            const modals = document.querySelectorAll('.modal');
            modals.forEach(modal => {
                if (event.target == modal) {
                    modal.classList.remove('active');
                }
            });
        }

        window.onload = generateIdeas;
    </script>
</body>
</html>
