<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Travel Stock Ideas (Silent Copy)</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Sarabun:wght@300;400;500;700&display=swap" rel="stylesheet">
    <script>
        tailwind.config = {
            darkMode: 'class',
        }
    </script>
    <style>
        body { font-family: 'Sarabun', sans-serif; background-color: #f3f4f6; transition: background 0.3s; }
        .dark body { background-color: #111827; }
        .dark .bg-white { background-color: #1f2937; }
        .dark .text-gray-800 { color: #f3f4f6; }
        .dark .text-gray-500 { color: #9ca3af; }
        .dark .border-gray-100 { border-color: #374151; }
        .fade-in { animation: fadeIn 0.4s ease-out; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        /* Toast z-index must be higher than modal */
        .toast { visibility: hidden; min-width: 260px; background-color: #1f2937; color: #fff; text-align: center; border-radius: 50px; padding: 12px 24px; position: fixed; z-index: 100; left: 50%; bottom: 30px; transform: translateX(-50%); font-size: 14px; font-weight: 500; opacity: 0; transition: all 0.3s; box-shadow: 0 4px 20px rgba(0,0,0,0.3); }
        .toast.show { visibility: visible; opacity: 1; bottom: 60px; }
        .dark .toast { background-color: #f3f4f6; color: #111827; }
        
        /* Modal Styles */
        .modal { opacity: 0; visibility: hidden; transition: all 0.3s ease; z-index: 50; }
        .modal.active { opacity: 1; visibility: visible; }
        .modal-content { transform: scale(0.95); transition: all 0.3s ease; }
        .modal.active .modal-content { transform: scale(1); }

        /* Custom Scrollbar */
        ::-webkit-scrollbar { width: 8px; }
        ::-webkit-scrollbar-track { background: transparent; }
        ::-webkit-scrollbar-thumb { background: #cbd5e1; border-radius: 4px; }
        ::-webkit-scrollbar-thumb:hover { background: #94a3b8; }
        .dark ::-webkit-scrollbar-thumb { background: #4b5563; }
    </style>
</head>
<body class="min-h-screen flex flex-col items-center py-6 px-4 dark:bg-gray-900">

    <!-- Header -->
    <div class="w-full max-w-5xl flex flex-col md:flex-row items-center justify-between gap-4 mb-6">
        <div class="text-center md:text-left">
            <h1 class="text-2xl md:text-3xl font-bold text-gray-800 dark:text-white flex items-center gap-2 flex-wrap justify-center md:justify-start">
                Stock Prompt Generator
                <span class="text-xs font-normal text-white bg-gradient-to-r from-blue-500 to-cyan-500 px-3 py-1 rounded-full shadow-sm">V.8.1 Silent Copy</span>
            </h1>
            <p class="text-xs text-gray-500 dark:text-gray-400 mt-1">‡∏™‡∏∏‡πà‡∏° 3 ‡∏ä‡πà‡∏≠‡∏á (‡πÑ‡∏°‡πà‡∏ã‡πâ‡∏≥‡πÄ‡∏î‡∏¥‡∏°) + ‡∏Ñ‡∏±‡∏î‡∏•‡∏≠‡∏Å‡∏ó‡∏±‡∏ô‡∏ó‡∏µ‡πÑ‡∏°‡πà‡∏°‡∏µ Pop-up</p>
        </div>

        <div class="flex flex-wrap gap-3 items-center justify-center">
            <button onclick="openCustomDataModal()" class="px-4 py-2 bg-yellow-100 hover:bg-yellow-200 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-200 rounded-full text-sm font-bold flex items-center gap-2 transition-colors border border-yellow-200 dark:border-yellow-800">
                üìù Custom Data
            </button>
            <button onclick="toggleDark()" class="px-4 py-2 bg-gray-200 dark:bg-gray-700 dark:text-white rounded-full text-sm hover:bg-gray-300 transition-colors">üåô Dark Mode</button>
            <button onclick="generateIdeas()" class="bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 px-8 rounded-full shadow-lg flex items-center gap-2 active:scale-95 transition-all">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15" />
                </svg>
                ‡∏™‡∏∏‡πà‡∏°‡πÉ‡∏´‡∏°‡πà (3 ‡∏ä‡πà‡∏≠‡∏á)
            </button>
        </div>
    </div>

    <!-- Filters -->
    <div class="w-full max-w-5xl mb-5 flex flex-wrap gap-2 justify-center" id="filter-container">
        <button onclick="filterCategory('all')" class="filter-btn active px-4 py-1.5 bg-blue-600 text-white rounded-full text-xs md:text-sm transition-colors">‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</button>
        <button onclick="filterCategory('asia')" class="filter-btn px-4 py-1.5 bg-gray-200 dark:bg-gray-700 dark:text-gray-300 rounded-full text-xs md:text-sm hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors">Asia</button>
        <button onclick="filterCategory('europe')" class="filter-btn px-4 py-1.5 bg-gray-200 dark:bg-gray-700 dark:text-gray-300 rounded-full text-xs md:text-sm hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors">Europe</button>
        <button onclick="filterCategory('north_america')" class="filter-btn px-4 py-1.5 bg-gray-200 dark:bg-gray-700 dark:text-gray-300 rounded-full text-xs md:text-sm hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors">America</button>
        <button onclick="resetToDefault()" class="hidden px-4 py-1.5 bg-red-100 text-red-600 rounded-full text-xs md:text-sm hover:bg-red-200 transition-colors" id="reset-btn">üîÑ ‡∏Å‡∏•‡∏±‡∏ö‡πÑ‡∏õ‡πÉ‡∏ä‡πâ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏î‡∏¥‡∏°</button>
    </div>

    <!-- Results Grid (Adjusted for 3 items centering) -->
    <div id="results-container" class="w-full max-w-6xl grid grid-cols-1 md:grid-cols-3 gap-6">
        <div class="col-span-full text-center py-16 bg-white dark:bg-gray-800 rounded-xl border border-dashed border-gray-300 dark:border-gray-600">
            <p class="text-gray-400">‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÇ‡∏´‡∏•‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•...</p>
        </div>
    </div>

    <!-- Prompt Modal (Hidden/Unused but structure kept for script references just in case) -->
    <div id="promptModal" class="modal fixed inset-0 z-50 flex items-center justify-center bg-black/60 p-4">
        <div class="modal-content bg-white dark:bg-gray-800 w-full max-w-2xl rounded-2xl shadow-2xl flex flex-col max-h-[90vh] overflow-hidden">
            <div class="p-4 border-b border-gray-200 dark:border-gray-700 flex justify-between items-center bg-gradient-to-r from-gray-50 to-white dark:from-gray-800 dark:to-gray-800">
                <h2 class="text-lg font-bold text-gray-800 dark:text-white flex items-center gap-2">
                    <span class="text-2xl">üèûÔ∏è</span> AI Landscape Prompt
                </h2>
                <button onclick="closeModal('promptModal')" class="text-gray-400 hover:text-red-500 transition-colors p-1 rounded-full hover:bg-gray-100 dark:hover:bg-gray-700">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" /></svg>
                </button>
            </div>
            <!-- ... content ... -->
        </div>
    </div>

    <!-- Custom Data Modal -->
    <div id="customDataModal" class="modal fixed inset-0 z-50 flex items-center justify-center bg-black/60 p-4">
        <div class="modal-content bg-white dark:bg-gray-800 w-full max-w-2xl rounded-2xl shadow-2xl flex flex-col h-[80vh] overflow-hidden">
            <div class="p-4 border-b border-gray-200 dark:border-gray-700 flex justify-between items-center bg-yellow-50 dark:bg-gray-800">
                <h2 class="text-lg font-bold text-gray-800 dark:text-white flex items-center gap-2">
                    <span>üìù</span> ‡πÉ‡∏™‡πà‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì‡πÄ‡∏≠‡∏á (Custom Data)
                </h2>
                <button onclick="closeModal('customDataModal')" class="text-gray-400 hover:text-red-500 transition-colors p-1 rounded-full hover:bg-gray-100 dark:hover:bg-gray-700">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" /></svg>
                </button>
            </div>
            <div class="p-6 flex-grow flex flex-col space-y-4 overflow-hidden">
                <p class="text-sm text-gray-600 dark:text-gray-400">‡∏ß‡∏≤‡∏á‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏™‡∏∏‡πà‡∏° (1 ‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î = 1 ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£) ‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏∞‡πÉ‡∏ä‡πâ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ô‡∏µ‡πâ‡πÅ‡∏ó‡∏ô‡∏ê‡∏≤‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏î‡∏¥‡∏°</p>
                <div class="bg-gray-50 dark:bg-gray-900 p-3 rounded-lg border border-gray-200 dark:border-gray-700 text-xs text-gray-500 font-mono">
                    ‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á:<br>
                    ‡∏ô‡πâ‡∏≥‡∏ï‡∏Å‡∏ó‡∏µ‡∏•‡∏≠‡∏ã‡∏π ‡∏à.‡∏ï‡∏≤‡∏Å<br>
                    ‡∏ó‡∏∞‡πÄ‡∏•‡∏´‡∏°‡∏≠‡∏Å‡∏†‡∏π‡∏ä‡∏µ‡πâ‡∏ü‡πâ‡∏≤ | misty mountain, sunrise, sea of fog<br>
                    ‡∏ß‡∏±‡∏î‡∏£‡πà‡∏≠‡∏á‡∏Ç‡∏∏‡πà‡∏ô | white temple, intricate details, thai architecture
                </div>
                <textarea id="custom-input" class="w-full flex-grow p-4 bg-white dark:bg-gray-900 border border-gray-300 dark:border-gray-600 rounded-xl text-sm focus:ring-2 focus:ring-yellow-500 focus:outline-none resize-none font-mono" placeholder="‡∏ß‡∏≤‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏µ‡πà‡∏ô‡∏µ‡πà..."></textarea>
            </div>
            <div class="p-4 border-t border-gray-200 dark:border-gray-700 flex justify-end gap-3">
                <button onclick="closeModal('customDataModal')" class="px-5 py-2 text-gray-500 hover:text-gray-700 font-medium">‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å</button>
                <button onclick="loadCustomData()" class="px-6 py-2 bg-yellow-500 hover:bg-yellow-600 text-white font-bold rounded-lg shadow-md transition-transform active:scale-95">
                    üöÄ ‡πÉ‡∏ä‡πâ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ô‡∏µ‡πâ‡∏™‡∏∏‡πà‡∏°‡πÄ‡∏•‡∏¢
                </button>
            </div>
        </div>
    </div>

    <!-- Toast -->
    <div id="toast" class="toast">
        <span class="flex items-center justify-center gap-2">‚úÖ ‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢!</span>
    </div>

    <script>
        // Default Database
        const defaultDatabase = [
            { t: "Komodo National Park", loc: "Indonesia", d: "‡πÄ‡∏Å‡∏≤‡∏∞‡∏™‡∏ß‡∏£‡∏£‡∏Ñ‡πå‡∏î‡∏¥‡∏ö‡πÄ‡∏ñ‡∏∑‡πà‡∏≠‡∏ô ‡∏´‡∏≤‡∏î‡∏ó‡∏£‡∏≤‡∏¢‡∏Ç‡∏≤‡∏ß", k: "Komodo National Park, Padar Island, savanna hills, turquoise ocean, pink beach", cat: "asia" },
            { t: "Li River", loc: "China", d: "‡∏†‡∏π‡πÄ‡∏Ç‡∏≤‡∏´‡∏¥‡∏ô‡∏õ‡∏π‡∏ô‡∏ó‡∏£‡∏á‡πÅ‡∏õ‡∏•‡∏Å‡∏ï‡∏≤", k: "Li River Guilin, karst mountains, bamboo raft, misty landscape, traditional chinese scenery", cat: "asia" },
            { t: "Laamu Atoll", loc: "Maldives", d: "‡∏•‡∏≤‡∏Å‡∏π‡∏ô‡∏ô‡πâ‡∏≥‡πÉ‡∏™‡∏£‡∏≤‡∏ß‡∏Å‡∏£‡∏∞‡∏à‡∏Å", k: "Laamu Atoll Maldives, crystal clear lagoon, overwater bungalow, white sandbar", cat: "asia" },
            { t: "James Bond Island", loc: "Thailand", d: "‡πÄ‡∏Ç‡∏≤‡∏ï‡∏∞‡∏õ‡∏π‡∏´‡∏¥‡∏ô‡∏õ‡∏π‡∏ô‡∏Å‡∏•‡∏≤‡∏á‡∏ó‡∏∞‡πÄ‡∏•", k: "James Bond Island, Phang Nga Bay, limestone karst, emerald water, longtail boat", cat: "asia" },
            { t: "Oludeniz Lagoon", loc: "Turkey", d: "‡∏•‡∏≤‡∏Å‡∏π‡∏ô‡∏™‡∏µ‡∏ü‡πâ‡∏≤‡πÄ‡∏ó‡∏≠‡∏£‡πå‡∏Ñ‡∏ß‡∏≠‡∏¢‡∏ã‡πå", k: "Oludeniz Blue Lagoon, paragliding view, turquoise mediterranean sea, white sand spit", cat: "asia" },
            { t: "Zhangjiajie National Park", loc: "China", d: "‡πÄ‡∏™‡∏≤‡∏´‡∏¥‡∏ô‡∏Ñ‡∏ß‡∏≠‡∏ï‡∏ã‡πå‡πÑ‡∏ã‡∏ï‡πå (Avatar)", k: "Zhangjiajie National Forest Park, floating mountains, quartzite pillars, misty forest", cat: "asia" },
            { t: "Rhossili Bay", loc: "Wales, UK", d: "‡∏´‡∏≤‡∏î‡∏ó‡∏£‡∏≤‡∏¢‡∏™‡∏µ‡∏ó‡∏≠‡∏á‡∏ó‡∏≠‡∏î‡∏¢‡∏≤‡∏ß", k: "Rhossili Bay, Gower Peninsula, golden sand beach, dramatic cliffs, coastal path", cat: "europe" },
            { t: "Vestrahorn", loc: "Iceland", d: "‡∏†‡∏π‡πÄ‡∏Ç‡∏≤‡∏ó‡∏£‡∏á‡πÄ‡∏Ç‡∏µ‡πâ‡∏¢‡∏ß‡∏™‡∏±‡∏ï‡∏ß‡πå‡∏ö‡∏ô‡∏´‡∏≤‡∏î‡∏î‡∏≥", k: "Vestrahorn mountain, Stokksnes black sand beach, dramatic peaks, reflection in water", cat: "europe" },
            { t: "Santorini Caldera", loc: "Greece", d: "‡∏ö‡πâ‡∏≤‡∏ô‡∏™‡∏µ‡∏Ç‡∏≤‡∏ß‡πÇ‡∏î‡∏°‡∏ü‡πâ‡∏≤ ‡∏ß‡∏¥‡∏ß‡∏ó‡∏∞‡πÄ‡∏•", k: "Santorini Caldera, Oia village, white houses blue domes, volcanic cliffs, aegean sea sunset", cat: "europe" },
            { t: "The Pitons", loc: "St. Lucia", d: "‡∏¢‡∏≠‡∏î‡πÄ‡∏Ç‡∏≤‡∏†‡∏π‡πÄ‡∏Ç‡∏≤‡πÑ‡∏ü‡∏Ñ‡∏π‡πà", k: "The Pitons St Lucia, twin volcanic spires, lush rainforest, caribbean sea, luxury resort view", cat: "north_america" },
            { t: "Monument Valley", loc: "USA", d: "‡πÅ‡∏ó‡πà‡∏á‡∏´‡∏¥‡∏ô‡∏ó‡∏£‡∏≤‡∏¢‡∏™‡∏µ‡πÅ‡∏î‡∏á", k: "Monument Valley, red sandstone buttes, desert landscape, navajo tribal park, western movie scenery", cat: "north_america" },
            { t: "Great Barrier Reef", loc: "Australia", d: "‡πÅ‡∏ô‡∏ß‡∏õ‡∏∞‡∏Å‡∏≤‡∏£‡∏±‡∏á‡∏ó‡∏µ‡πà‡πÉ‡∏´‡∏ç‡πà‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î", k: "Great Barrier Reef, aerial view coral, turquoise water, marine life, underwater split shot", cat: "oceania" },
            { t: "Milford Sound", loc: "New Zealand", d: "‡∏ü‡∏¢‡∏≠‡∏£‡πå‡∏î‡∏™‡∏π‡∏á‡∏ä‡∏±‡∏ô", k: "Milford Sound, new zealand fiord, mitre peak, waterfalls cascading, misty cliff", cat: "oceania" }
        ];

        // Active Database
        let fullDatabase = [...defaultDatabase];
        let isCustomMode = false;
        
        // State for repetition prevention
        let lastDisplayedTitles = [];

        const MAGIC_QUALITY = "raw photo, photorealistic, hyperrealistic, highly detailed, 8k uhd, dslr, wide angle lens, sharp focus, cinematic lighting, volumetric lighting, ray tracing, hdr, nature photography, national geographic style";

        let currentIdeas = [];
        let currentCategory = 'all'; 

        function shuffleArray(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
            return array;
        }

        function generateIdeas() {
            const container = document.getElementById('results-container');
            container.innerHTML = '';
            
            let filteredPool = fullDatabase;
            // Filter by Category (if not custom)
            if (!isCustomMode) {
                filteredPool = fullDatabase.filter(item => currentCategory === 'all' || item.cat === currentCategory);
            }

            // Filter out PREVIOUSLY displayed items (Anti-Repetition)
            let availablePool = filteredPool.filter(item => !lastDisplayedTitles.includes(item.t));
            
            // If pool is exhausted or too small, reset restriction
            if (availablePool.length < 3) {
                availablePool = filteredPool;
                lastDisplayedTitles = []; // Clear history
            }
            
            let pool = [...availablePool];
            shuffleArray(pool);
            currentIdeas = pool.slice(0, 3); // Show ONLY 3 cards

            // Update Last Displayed
            lastDisplayedTitles = currentIdeas.map(item => item.t);

            if (currentIdeas.length === 0) {
                 container.innerHTML = `<div class="col-span-full text-center py-10 text-gray-500">‡πÑ‡∏°‡πà‡∏û‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•...</div>`;
                 return;
            }

            currentIdeas.forEach((item, i) => {
                const card = document.createElement('div');
                // Using h-full and flex flex-col ensuring equal height
                card.className = `bg-white dark:bg-gray-800 p-5 rounded-xl shadow-md border border-gray-200 dark:border-gray-700 flex flex-col h-full hover:border-blue-400 dark:hover:border-blue-500 transition-all fade-in relative group`;
                card.style.animationDelay = `${i * 0.05}s`;
                
                // HTML Structure ensuring fixed layout height for content
                card.innerHTML = `
                    <div class="flex-grow flex flex-col">
                        <div class="flex justify-between items-start mb-2 h-8"> 
                            <h3 class="font-bold text-gray-800 dark:text-gray-100 text-base md:text-lg line-clamp-1" title="${item.t}">${item.t}</h3>
                            ${item.loc ? `<span class="text-[10px] bg-gray-100 dark:bg-gray-700 px-2 py-0.5 rounded text-gray-500 whitespace-nowrap ml-2">${item.loc}</span>` : ''}
                        </div>
                        <p class="text-xs text-gray-400 mb-3 h-8 overflow-hidden leading-4 line-clamp-2">${item.d}</p>
                        <div class="bg-gray-50 dark:bg-gray-900/50 p-3 rounded border border-gray-100 dark:border-gray-700 mb-4 flex-grow-0 h-16 overflow-hidden">
                            <p class="text-[10px] text-gray-400 uppercase font-bold mb-1">Keywords:</p>
                            <p class="text-xs text-gray-600 dark:text-gray-300 font-mono leading-relaxed line-clamp-2">${item.k}</p>
                        </div>
                    </div>
                    
                    <div class="flex flex-col gap-2 mt-auto pt-2 border-t border-gray-100 dark:border-gray-700">
                        <button onclick="openPromptModal(${i})" class="w-full bg-gradient-to-r from-emerald-500 to-teal-600 hover:from-emerald-600 hover:to-teal-700 text-white font-bold py-3 rounded-lg text-sm shadow-md hover:shadow-lg transition-all flex items-center justify-center gap-2">
                            <span>üèûÔ∏è</span> ‡∏™‡∏£‡πâ‡∏≤‡∏á Prompt
                        </button>
                        <div class="flex gap-2">
                            <button onclick="copyText('${item.k.replace(/'/g, "\\'")}', this)" class="flex-1 bg-blue-50 hover:bg-blue-100 dark:bg-blue-900/20 dark:hover:bg-blue-900/40 text-blue-700 dark:text-blue-300 py-2 rounded-lg text-xs font-medium border border-blue-100 dark:border-blue-800 transition-colors">Copy Keys</button>
                        </div>
                    </div>
                `;
                container.appendChild(card);
            });
        }

        // --- Custom Data Logic ---
        function openCustomDataModal() {
            document.getElementById('customDataModal').classList.add('active');
            document.getElementById('custom-input').focus();
        }

        function loadCustomData() {
            const rawText = document.getElementById('custom-input').value;
            if (!rawText.trim()) {
                showToast("‚ö†Ô∏è ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÉ‡∏™‡πà‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Å‡πà‡∏≠‡∏ô‡∏Ñ‡∏£‡∏±‡∏ö");
                return;
            }

            const lines = rawText.split('\n');
            const newDatabase = [];

            lines.forEach(line => {
                if (line.trim()) {
                    const parts = line.split('|');
                    const title = parts[0].trim();
                    const keywords = parts[1] ? parts[1].trim() : title;
                    
                    newDatabase.push({
                        t: title,
                        loc: "Custom",
                        d: "‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏à‡∏≤‡∏Å‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ",
                        k: keywords,
                        cat: "custom"
                    });
                }
            });

            if (newDatabase.length > 0) {
                fullDatabase = newDatabase;
                isCustomMode = true;
                currentCategory = 'all';
                lastDisplayedTitles = []; 
                
                document.getElementById('reset-btn').classList.remove('hidden');
                document.querySelectorAll('.filter-btn').forEach(btn => btn.classList.add('hidden'));
                
                closeModal('customDataModal');
                generateIdeas();
                showToast(`‚úÖ ‡πÇ‡∏´‡∏•‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• ${newDatabase.length} ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡πÅ‡∏•‡πâ‡∏ß!`);
            } else {
                showToast("‚ö†Ô∏è ‡πÑ‡∏°‡πà‡∏û‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏µ‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á");
            }
        }

        function resetToDefault() {
            fullDatabase = [...defaultDatabase];
            isCustomMode = false;
            lastDisplayedTitles = [];
            
            document.getElementById('reset-btn').classList.add('hidden');
            document.querySelectorAll('.filter-btn').forEach(btn => btn.classList.remove('hidden'));
            
            generateIdeas();
            showToast("üîÑ ‡∏Å‡∏•‡∏±‡∏ö‡∏™‡∏π‡πà‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô");
        }

        // --- Prompt Logic (MODIFIED: NO MODAL) ---
        function openPromptModal(index) {
            const item = currentIdeas[index];
            // We don't use modal UI anymore, just generate logic
            
            let subject = `Spectacular landscape photography of ${item.t},`;
            if (item.loc && item.loc !== "Custom") {
                subject += ` located in ${item.loc},`;
            }
            
            let details = `${item.k}, vast panoramic view, breathtaking scenery,`;
            const times = ["golden hour", "sunset", "blue hour", "sunrise", "dramatic daylight", "clear blue sky"];
            const selectedTime = times[Math.floor(Math.random() * times.length)];
            let atmosphere = `${selectedTime}, vivid colors, atmospheric depth,`;
            
            const fullPrompt = `${subject} ${details} ${atmosphere} ${MAGIC_QUALITY}`;
            
            // Direct copy without opening modal
            copyToClipboardRaw(fullPrompt, "Prompt");
        }

        function closeModal(modalId) {
            document.getElementById(modalId).classList.remove('active');
        }

        function copyModalText(elementId) {
            const text = document.getElementById(elementId).value;
            copyToClipboardRaw(text, "Prompt");
        }

        function copyText(text, btn) {
            copyToClipboardRaw(text, "Location Keywords", btn);
        }

        function copyToClipboardRaw(text, label, btnElement = null) {
            const textArea = document.createElement("textarea");
            textArea.value = text;
            textArea.style.position = "fixed";
            textArea.style.left = "0";
            textArea.style.top = "0";
            textArea.style.opacity = "0";
            document.body.appendChild(textArea);
            textArea.focus();
            textArea.select();

            try {
                const successful = document.execCommand('copy');
                if (successful) {
                    showToast(`‚úÖ ‡∏Ñ‡∏±‡∏î‡∏•‡∏≠‡∏Å ${label} ‡πÅ‡∏•‡πâ‡∏ß!`);
                    if(btnElement) {
                        const originalText = btnElement.textContent;
                        btnElement.textContent = '‚úì Copied!';
                        setTimeout(() => { btnElement.textContent = originalText; }, 1000);
                    }
                } else {
                    window.prompt("‡∏Å‡∏î Ctrl+C ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏Ñ‡∏±‡∏î‡∏•‡∏≠‡∏Å:", text);
                }
            } catch (err) {
                window.prompt("‡∏Å‡∏î Ctrl+C ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏Ñ‡∏±‡∏î‡∏•‡∏≠‡∏Å:", text);
            }
            document.body.removeChild(textArea);
        }

        function showToast(msg) {
            const toast = document.getElementById('toast');
            toast.innerHTML = `<span class="flex items-center justify-center gap-2">${msg}</span>`;
            toast.className = `toast show`;
            setTimeout(() => toast.className = toast.className.replace(' show', ''), 2500);
        }

        function toggleDark() {
            document.documentElement.classList.toggle('dark');
            document.body.classList.toggle('dark');
            localStorage.setItem('darkMode', document.documentElement.classList.contains('dark'));
        }

        function filterCategory(cat) {
            if (isCustomMode) return;
            
            document.querySelectorAll('.filter-btn').forEach(b => {
                b.classList.remove('active', 'bg-blue-600', 'text-white');
                b.classList.add('bg-gray-200', 'dark:bg-gray-700', 'dark:text-gray-300');
            });
            event.target.classList.remove('bg-gray-200', 'dark:bg-gray-700', 'dark:text-gray-300');
            event.target.classList.add('active', 'bg-blue-600', 'text-white');
            currentCategory = cat;
            generateIdeas();
        }

        if (localStorage.getItem('darkMode') === 'true') {
            document.documentElement.classList.add('dark');
            document.body.classList.add('dark');
        }

        window.onclick = function(event) {
            const modals = document.querySelectorAll('.modal');
            modals.forEach(modal => {
                if (event.target == modal) {
                    modal.classList.remove('active');
                }
            });
        }

        window.onload = generateIdeas;
    </script>
</body>
</html>
